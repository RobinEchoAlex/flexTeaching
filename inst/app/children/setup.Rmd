```{r setup, include=FALSE, context="setup"}
options(shiny.fullstacktrace = TRUE)
library(broom)
library(gt)
library(tidyr)
library(flexdashboard)
library(magrittr)
library(dplyr)
library(flexTeaching)
knitr::opts_chunk$set(echo = FALSE)

all_assignment_data =  flexTeaching:::getAssignments(simple = FALSE)

globals = new.env()
```
```{r context='setup'}

# https://stackoverflow.com/questions/23599268/include-a-javascript-file-in-shiny-app
# TODO move to setup.rmd
HTML('<head>
               <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.js"></script>
               <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>
          </head>')

```

```{r, echo=FALSE}
# Boilerplate code for importing shinyjs in rmd, the same below
shiny::addResourcePath("shinyjs", system.file("srcjs", package = "shinyjs"))
```
```{r, context="server"}
shinyjs::useShinyjs(html = TRUE)

```
<script src="shinyjs/inject.js"></script>

```{r cache, eval = FALSE, context="server"}
shinyOptions(
  # Key-value cache stores with automatic pruning by age or max_size.
  cache = cachem::cache_disk(
    dir = "./my_app_cache",
    max_size = 512 * 1024^2,
    max_age = 60 * 60 * 24 * 10
    )
)
```
